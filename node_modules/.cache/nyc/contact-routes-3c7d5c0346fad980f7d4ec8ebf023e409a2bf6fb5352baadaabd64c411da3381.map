{"version":3,"file":"C:/Users/full/Desktop/RealWordApp/cypress-realworld-app/backend/contact-routes.ts","sources":["C:/Users/full/Desktop/RealWordApp/cypress-realworld-app/backend/contact-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAE9B,uCAA4F;AAC5F,qCAAoE;AACpE,2CAAiD;AACjD,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AACT,yBAAyB;AACzB,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,UAAC,GAAG,EAAE,GAAG;IACxB,IAAA,QAAQ,GAAK,GAAG,CAAC,MAAM,SAAf,CAAgB;IAEhC,IAAM,QAAQ,GAAG,IAAA,gCAAqB,EAAC,QAAQ,CAAC,CAAC;IAEjD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;AACzB,CAAC,CAAC,CAAC;AAEH,8BAA8B;AAC9B,MAAM,CAAC,IAAI,CACT,GAAG,EACH,6BAAmB,EACnB,IAAA,4BAAkB,EAAC,CAAC,IAAA,8BAAiB,EAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,IAAI,cAAb,CAAc;IACnC,0BAA0B;IAC1B,IAAM,OAAO,GAAG,IAAA,+BAAoB,EAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,aAAa,CAAC,CAAC;IAEnE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;AACxB,CAAC,CACF,CAAC;AACF,2CAA2C;AAC3C,MAAM,CAAC,MAAM,CACX,aAAa,EACb,6BAAmB,EACnB,IAAA,4BAAkB,EAAC,CAAC,IAAA,8BAAiB,EAAC,WAAW,CAAC,CAAC,CAAC,EACpD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,SAAS,GAAK,GAAG,CAAC,MAAM,UAAf,CAAgB;IAEjC,IAAM,QAAQ,GAAG,IAAA,4BAAiB,EAAC,SAAS,CAAC,CAAC;IAE9C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;AACzB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\n\r\nimport { getContactsByUsername, removeContactById, createContactForUser } from \"./database\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport { shortIdValidation } from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n//GET /contacts/:username\r\nrouter.get(\"/:username\", (req, res) => {\r\n  const { username } = req.params;\r\n\r\n  const contacts = getContactsByUsername(username);\r\n\r\n  res.status(200);\r\n  res.json({ contacts });\r\n});\r\n\r\n//POST /contacts (scoped-user)\r\nrouter.post(\r\n  \"/\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"contactUserId\")]),\r\n  (req, res) => {\r\n    const { contactUserId } = req.body;\r\n    /* istanbul ignore next */\r\n    const contact = createContactForUser(req.user?.id!, contactUserId);\r\n\r\n    res.status(200);\r\n    res.json({ contact });\r\n  }\r\n);\r\n//DELETE /contacts/:contactId (scoped-user)\r\nrouter.delete(\r\n  \"/:contactId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"contactId\")]),\r\n  (req, res) => {\r\n    const { contactId } = req.params;\r\n\r\n    const contacts = removeContactById(contactId);\r\n\r\n    res.status(200);\r\n    res.json({ contacts });\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]}